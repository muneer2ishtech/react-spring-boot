# books-springboot-app

## Versions
- java - 21
- spring-boot - 3.2.4
- Apache Maven - 3.9.6

## Execution

### Run on local

- To run with dev profile

```
mvn spring-boot:run -Dspring-boot.run.profiles=dev
```

### Docker

### Docker build

```
docker build -f Dockerfile . -t muneer2ishtech/books-springboot-app:0.1.0
```

### Docker run

- To run in interactive mode

```
docker run -it \
 -e SPRING_PROFILES_ACTIVE=dev \
 -p 8080:8080 \
 muneer2ishtech/books-springboot-app:0.1.0
```

- To run in detached mode

```
docker run -d \
 -e SPRING_PROFILES_ACTIVE=dev \
 -p 8080:8080 \
 muneer2ishtech/books-springboot-app:0.1.0
```

- You can add container name for easy find using below option

    `--name books-springboot-app-container`

- To find the container

    `docker ps -a --filter "ancestor=muneer2ishtech/books-springboot-app:0.1.0"`

    `docker ps -a --filter "name=books-springboot-app-container`

- To tail console logs

    `docker logs -f TODO_CONTAINER_ID_OR_NAME`


## DB

### To connect to H2 DB
[http://localhost:8080/h2-console](http://localhost:8080/h2-console)

### DDL
- JPA from Spring-Boot will create / update tables
- If you want to manually create them, you can use following script

```
create table t_book (
  id bigint generated by default as identity,
  title varchar(255) not null unique,
  author varchar(255) not null,
  year SMALLINT not null,
  price numeric(10,2) not null,
  primary key (id)
)
```

## APIs

- To use pagination and sorting by multiple attributes

    ```
    /api/v1/books?page=3&size=8&sort=price,desc&sort=title,asc
    ```

### Swagger

- [http://localhost:8080/v3/api-docs](http://localhost:8080/v3/api-docs)
- [http://localhost:8080/swagger-ui.html](http://localhost:8080/swagger-ui.html)

## References
[Spring-Boot reference](./HELP.md)
